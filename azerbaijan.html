<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azerbaijan - Interactive Reading & Questions</title>
    <style>
        /* CSS Variables for Theming */
        :root {
            --bg-color: #1a1a2e;
            --primary-color: #16213e;
            --secondary-color: #0f3460;
            --accent-color: #e94560;
            --accent-hover-color: #533483;
            --text-color: #f5f5f5;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* Header Styles */
        header {
            background-color: var(--primary-color);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
            min-height: 70px;
        }
        
        .title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #themeSelector {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid var(--accent-color);
            background-color: var(--secondary-color);
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
        }

        .score-display {
            font-size: 18px;
            font-weight: bold;
            color: #f39c12;
            margin-right: 15px;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            font-weight: 500;
        }
        
        button:hover {
            background-color: var(--accent-hover-color);
        }
        
        /* Main Content */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 20px;
            min-height: 0;
        }
        
        .content-wrapper {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-height: 0;
            gap: 20px;
        }
        
        .reading {
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 10px;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }
        
        .reading-content {
            flex: 1;
        }
        
        .reading p {
            margin-bottom: 20px;
            font-size: 20px;
            text-align: justify;
        }
        
        .highlight {
            background-color: var(--accent-color);
            padding: 3px 6px;
            border-radius: 4px;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Question Box */
        .qbox {
            background-color: var(--primary-color);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            min-height: 200px;
        }
        
        .question {
            font-size: 22px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .option {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background-color: var(--accent-hover-color);
            transform: translateY(-2px);
        }
        
        .option.selected {
            background-color: var(--accent-hover-color);
            border-color: var(--accent-color);
        }
        
        .answer {
            display: none;
            background-color: var(--accent-color);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 18px;
            font-weight: 500;
        }
        
        .hint {
            display: none;
            background-color: var(--accent-hover-color);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 18px;
            font-weight: 500;
            border-left: 4px solid var(--accent-color);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        input[type="text"], textarea {
            width: 100%;
            padding: 15px;
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 2px solid var(--accent-hover-color);
            border-radius: 8px;
            font-size: 18px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        /* Vocabulary Grid */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        
        .vocab-card {
            background-color: var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 500;
            border: 2px solid transparent;
        }
        
        .vocab-card:hover {
            transform: translateY(-5px);
            background-color: var(--accent-hover-color);
            border-color: var(--accent-color);
        }
        
        .vocab-card.flipped {
            background-color: var(--accent-color);
            border-color: var(--text-color);
        }
        
        /* Vocabulary Game */
        .vocab-game-container {
            display: flex;
            flex: 1;
            gap: 30px;
            padding: 20px;
            justify-content: center;
            align-items: flex-start;
        }
        
        .vocab-game-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 45%;
        }
        
        .vocab-game-card {
            background-color: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 18px;
            font-weight: 500;
            border: 3px solid transparent;
            user-select: none;
        }
        
        .vocab-game-card:hover {
            transform: translateY(-3px);
            background-color: var(--accent-hover-color);
        }
        
        .vocab-game-card.selected {
            border-color: #f39c12;
            background-color: var(--accent-hover-color);
            transform: scale(1.05);
        }
        
        .vocab-game-card.matched {
            background-color: #27ae60;
            border-color: #2ecc71;
            cursor: default;
            transform: scale(1);
            animation: match-bounce 0.5s ease-out;
        }

        @keyframes match-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .vocab-game-card.incorrect {
            animation: shake 0.5s;
            background-color: #c0392b;
            border-color: #e74c3c;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .game-message {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #2ecc71;
            margin-top: 20px;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        /* Navigation */
        nav {
            display: flex;
            flex-direction: column; /* Changed to column to fit progress bar */
            justify-content: center;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--primary-color);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            min-height: 80px; /* Increased height */
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background-color: var(--secondary-color);
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--accent-color);
            transition: width 0.3s ease-in-out;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        
        #pageIndicator {
            font-size: 18px;
            font-weight: 500;
        }
        
        /* Footer */
        footer {
            background-color: var(--secondary-color);
            padding: 12px;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
        }
        
        /* Completion Screen */
        .completion {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 40px;
        }
        
        .completion h1 {
            font-size: 56px;
            margin-bottom: 30px;
            color: var(--accent-color);
        }
        
        .completion p {
            font-size: 28px;
            margin-bottom: 40px;
        }

        .final-score {
            font-size: 36px;
            color: #f39c12;
            margin-bottom: 20px;
        }
        
        /* Fullscreen Styles - YENƒ∞ Y√ñNTEM */
        body.fullscreen-mode .reading p { font-size: 25px; }
        body.fullscreen-mode .question { font-size: 30px; }
        body.fullscreen-mode .option { font-size: 20px; padding: 15px; }
        body.fullscreen-mode input[type="text"], body.fullscreen-mode textarea { font-size: 30px; padding: 20px; }
        body.fullscreen-mode .answer { font-size: 30px; padding: 20px; }
        body.fullscreen-mode .hint { font-size: 30px; padding: 20px; }
        body.fullscreen-mode .vocab-card { font-size: 18px; min-height: 150px; padding: 30px; }
        body.fullscreen-mode .vocab-game-card { font-size: 16px; padding: 18px; }
        body.fullscreen-mode .game-message { font-size: 36px; }

        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--primary-color); }
        ::-webkit-scrollbar-thumb { background: var(--accent-hover-color); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-color); }

        /* Theme Definitions */
        body.theme-light {
            --bg-color: #f5f5f5;
            --primary-color: #e0e0e0;
            --secondary-color: #ffffff;
            --accent-color: #3498db;
            --accent-hover-color: #2980b9;
            --text-color: #333333;
            --font-family: 'Arial', sans-serif;
        }

        body.theme-nature {
            --bg-color: #2c3e27;
            --primary-color: #3e4f37;
            --secondary-color: #4a6b49;
            --accent-color: #8bc34a;
            --accent-hover-color: #7cb342;
            --text-color: #e8f5e9;
            --font-family: 'Georgia', serif;
        }

        body.theme-tech {
            --bg-color: #263238;
            --primary-color: #37474f;
            --secondary-color: #455a64;
            --accent-color: #00bcd4;
            --accent-hover-color: #00acc1;
            --text-color: #eceff1;
            --font-family: 'Roboto Mono', monospace;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="title">Azerbaijan - Interactive Reading & Questions (A2 Level)</div>
        <div class="controls">
            <div class="score-display">Score: <span id="score">0</span></div>
            <select id="themeSelector">
                <option value="dark-blue">Dark Blue</option>
                <option value="light">Light</option>
                <option value="nature">Nature</option>
                <option value="tech">Tech</option>
            </select>
            <button id="readBtn">üîä Read</button>
            <button id="pauseBtn" style="display:none;">‚è∏Ô∏è Pause</button>
            <button id="resumeBtn" style="display:none;">‚ñ∂Ô∏è Resume</button>
            <button id="stopBtn" style="display:none;">‚èπÔ∏è Stop</button>
            <button id="fullscreenBtn">‚õ∂ Fullscreen</button>
        </div>
    </header>
    
    <main>
        <div class="content-wrapper">
            <div class="reading" id="reading">
                <div class="reading-content" id="readingContent">
                    <!-- Reading content will be inserted here -->
                </div>
            </div>
            
            <div class="qbox" id="qbox">
                <!-- Question content will be inserted here -->
            </div>
            
            <div class="vocab-grid" id="vocabGrid" style="display:none;">
                <!-- Vocabulary cards will be inserted here -->
            </div>

            <div class="vocab-game-container" id="vocabGameContainer" style="display:none;">
                <!-- Vocabulary Game will be inserted here -->
            </div>
            
            <div class="completion" id="completion">
                <h1>üéâ You've completed all questions!</h1>
                <div class="final-score">Your Final Score: <span id="finalScore">0</span></div>
                <p>Great job on learning about Azerbaijan!</p>
                <button id="restartBtn">üîÑ Restart</button>
            </div>
        </div>
    </main>
    
    <nav>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="nav-buttons">
            <button id="prevBtn">‚¨ÖÔ∏è Previous</button>
            <span id="pageIndicator">Page 1</span>
            <button id="nextBtn">Next ‚û°Ô∏è</button>
        </div>
    </nav>
    
    <footer>
        Bu √ßalƒ±≈üma ƒ∞ngilizce √ñƒüretmeni Abdullah AYDINHAN tarafƒ±ndan yapƒ±lmƒ±≈ütƒ±r.
    </footer>
    
    <script>
        // Content Variables
        const TOPIC = "Azerbaijan";
        const LEVEL = "A2";
        
        const PASSAGE = `<p>In the modern era, various tourist places in the world are quite similar. Travel enthusiasts, therefore, search for authentic and unusual destinations. The Turkic states, with their unique culture, rich history, and many unexplored locations, are completely worth seeing. Travellers advise that people visit one of them, Azerbaijan, and spend a memorable time there.</p>
        
        <p>The Republic of Azerbaijan is at the crossroads of Western Asia and Eastern Europe. The country is between the Caucasus Mountains and the Caspian Sea. It is home to amazing natural wonders such as mud volcanoes, hot springs, and the Yanar Daƒü, a natural burning fire on a hillside near the Caspian Sea. People can experience these distinctive natural beauties. Additionally, in the capital city, Baku, travellers can visit UNESCO World Heritage Sites, including the Walled City of Baku, the Palace of the Shirvanshahs, and the Maiden Tower. They can explore unique arts, cultural activities, and a modern business city life. Tourists can also enjoy an atmosphere with historical wonders, architecture, and modern skyscrapers.</p>
        
        <p>In addition, Azerbaijan's cuisine is diverse and delicious. It reflects its history, being a part of the Silk Road trading and cultural exchange crossroads. Visitors can taste the traditional dishes in a peaceful atmosphere. One can enjoy their visit thanks to the welcoming Azerbaijani people, even without speaking a single word of Azerbaijani.</p>`;
        
        const VOCAB_LIST = [
            ["authentic", "ger√ßek"], ["unusual", "olaƒüandƒ±≈üƒ±"], ["destinations", "varƒ±≈ü noktalarƒ±"],
            ["unique", "benzersiz"], ["culture", "k√ºlt√ºr"], ["rich", "zengin"], ["history", "tarih"],
            ["unexplored", "ke≈üfedilmemi≈ü"], ["memorable", "unutulmaz"], ["republic", "cumhuriyet"],
            ["crossroads", "kav≈üak"], ["mountains", "daƒülar"], ["natural", "doƒüal"], ["wonders", "harikalar"],
            ["volcanoes", "yanardaƒülar"], ["springs", "pƒ±narlar"], ["burning", "yanan"], ["hillside", "yamac"],
            ["distinctive", "ayrƒ±calƒ±klƒ±"], ["capital", "ba≈ükent"], ["heritage", "miras"], ["walled", "surlu"],
            ["palace", "saray"], ["tower", "kule"], ["explore", "ke≈üfetmek"], ["activities", "etkinlikler"],
            ["quite ", "olduk√ßa"], ["business", "i≈ü"], ["atmosphere", "atmosfer"], ["architecture", "mimari"],
            ["skyscrapers", "g√∂kdelenler"], ["cuisine", "mutfak"], ["diverse", "√ße≈üitli"], ["delicious", "lezzetli"],
            ["reflect", "yansƒ±tmak"], ["silk", "ipek"], ["road", "yol"], ["trading", "ticaret"], ["exchange", "deƒüi≈üim"],
            ["traditional", "geleneksel"], ["dishes", "yemekler"], ["peaceful", "huzurlu"], ["welcoming", "misafirperver-kar≈üƒ±lama"]
        ];
        
        const TF_QUESTIONS = [
            { prompt: "Azerbaijan is located in Western Asia and Eastern Europe.", answer: "True", highlights: ["The Republic of Azerbaijan is at the crossroads of Western Asia and Eastern Europe"], hint: "Look for the geographical location of Azerbaijan in the second paragraph." },
            { prompt: "The Caspian Sea is not mentioned in the passage.", answer: "False", highlights: ["Caspian Sea"], hint: "Check the second paragraph for mentions of seas." },
            { prompt: "Yanar Daƒü is a natural burning fire on a hillside.", answer: "True", highlights: ["Yanar Daƒü, a natural burning fire on a hillside"], hint: "Look for natural wonders mentioned in the passage." },
            { prompt: "Baku is not the capital city of Azerbaijan.", answer: "False", highlights: ["in the capital city, Baku"], hint: "Find where the capital city is mentioned." },
            { prompt: "The Walled City of Baku is a UNESCO World Heritage Site.", answer: "True", highlights: ["UNESCO World Heritage Sites, including the Walled City of Baku"], hint: "Check the list of UNESCO sites mentioned." },
            { prompt: "Azerbaijan's cuisine is described as boring in the passage.", answer: "False", highlights: ["Azerbaijan's cuisine is diverse and delicious"], hint: "Look at the description of Azerbaijan's cuisine in the last paragraph." },
            { prompt: "Azerbaijan was part of the Silk Road trading route.", answer: "True", highlights: ["being a part of the Silk Road trading"], hint: "Check the historical context in the last paragraph." },
            { prompt: "The passage mentions that visitors need to speak Azerbaijani to enjoy their visit.", answer: "False", highlights: ["even without speaking a single word of Azerbaijani"], hint: "Look at the end of the last paragraph." },
            { prompt: "The Maiden Tower is mentioned as a UNESCO World Heritage Site.", answer: "True", highlights: ["UNESCO World Heritage Sites, including the Walled City of Baku, the Palace of the Shirvanshahs, and the Maiden Tower"], hint: "Check the complete list of UNESCO sites." },
            { prompt: "The passage suggests that modern tourist places around the world are very different from each other.", answer: "False", highlights: ["various tourist places in the world are quite similar"], hint: "Look at the first sentence of the passage." }
        ];
        
        const MCQ_QUESTIONS = [
            { 
                prompt: "According to the passage, what do travel enthusiasts search for?", 
                options: ["Famous destinations", "Authentic and unusual destinations", "Expensive destinations", "Similar destinations"], 
                answer: 1, 
                highlights: ["Travel enthusiasts, therefore, search for authentic and unusual destinations"],
                hint: "Look at what travel enthusiasts are looking for in the first paragraph."
            },
            { 
                prompt: "What natural wonders are mentioned in Azerbaijan?", 
                options: ["Beaches and forests", "Mountains and rivers", "Mud volcanoes, hot springs, and Yanar Daƒü", "Deserts and lakes"], 
                answer: 2, 
                highlights: ["mud volcanoes, hot springs, and the Yanar Daƒü"],
                hint: "Check the list of natural wonders in the second paragraph."
            },
            { 
                prompt: "What can visitors experience in Baku?", 
                options: ["Only historical sites", "Only modern skyscrapers", "Only natural wonders", "Historical wonders, architecture, and modern skyscrapers"], 
                answer: 3, 
                highlights: ["Tourists can also enjoy an atmosphere with historical wonders, architecture, and modern skyscrapers"],
                hint: "Look at what tourists can enjoy in Baku."
            },
            { 
                prompt: "What does Azerbaijan's cuisine reflect?", 
                options: ["Modern cooking techniques", "Its history as part of the Silk Road", "Only European influences", "Only Asian influences"], 
                answer: 1, 
                highlights: ["It reflects its history, being a part of the Silk Road trading"],
                hint: "Check what the cuisine reflects in the last paragraph."
            },
            { 
                prompt: "What is NOT mentioned as a UNESCO World Heritage Site in Baku?", 
                options: ["The Walled City of Baku", "The Palace of the Shirvanshahs", "The Maiden Tower", "The Flame Towers"], 
                answer: 3, 
                highlights: ["UNESCO World Heritage Sites, including the Walled City of Baku, the Palace of the Shirvanshahs, and the Maiden Tower"],
                hint: "Compare the options with the list of UNESCO sites mentioned."
            },
            { 
                prompt: "Where is Azerbaijan located?", 
                options: ["Between the Black Sea and the Mediterranean Sea", "Between the Caucasus Mountains and the Caspian Sea", "Between the Red Sea and the Persian Gulf", "Between the Alps and the Adriatic Sea"], 
                answer: 1, 
                highlights: ["The country is between the Caucasus Mountains and the Caspian Sea"],
                hint: "Look for the geographical description in the second paragraph."
            },
            { 
                prompt: "What makes Azerbaijan worth visiting according to the passage?", 
                options: ["Its expensive hotels", "Its unique culture, rich history, and unexplored locations", "Its theme parks", "Its shopping malls"], 
                answer: 1, 
                highlights: ["with their unique culture, rich history, and many unexplored locations, are completely worth seeing"],
                hint: "Check what makes the Turkic states worth visiting."
            },
            { 
                prompt: "What can visitors experience in Azerbaijan?", 
                options: ["Only city life", "Only natural wonders", "Only cultural activities", "Distinctive natural beauties, unique arts, cultural activities, and modern city life"], 
                answer: 3, 
                highlights: ["People can experience these distinctive natural beauties", "They can explore unique arts, cultural activities, and a modern business city life"],
                hint: "Look for all the experiences mentioned throughout the passage."
            },
            { 
                prompt: "What is the atmosphere like when tasting traditional dishes in Azerbaijan?", 
                options: ["Noisy and crowded", "Peaceful", "Formal", "Expensive"], 
                answer: 1, 
                highlights: ["Visitors can taste the traditional dishes in a peaceful atmosphere"],
                hint: "Check the description of the dining atmosphere."
            },
            { 
                prompt: "What helps visitors enjoy their time in Azerbaijan according to the passage?", 
                options: ["Speaking Azerbaijani fluently", "The welcoming Azerbaijani people", "Having a lot of money", "Knowing the history beforehand"], 
                answer: 1, 
                highlights: ["One can enjoy their visit thanks to the welcoming Azerbaijani people"],
                hint: "Look at what helps visitors enjoy their visit at the end of the passage."
            }
        ];
        
        const FILL_QUESTIONS = [
            { prompt: "The Republic of Azerbaijan is at the ______ of Western Asia and Eastern Europe.", answer: "crossroads", highlights: ["crossroads of Western Asia and Eastern Europe"], hint: "Think about a place where two regions meet." },
            { prompt: "The country is between the Caucasus Mountains and the ______ Sea.", answer: "Caspian", highlights: ["Caspian Sea"], hint: "Look for the sea mentioned in the second paragraph." },
            { prompt: "Yanar Daƒü is a natural burning fire on a ______ near the Caspian Sea.", answer: "hillside", highlights: ["burning fire on a hillside"], hint: "A hillside is the side of a hill." },
            { prompt: "In the capital city, ______, travellers can visit UNESCO World Heritage Sites.", answer: "Baku", highlights: ["in the capital city, Baku"], hint: "The capital city is mentioned right after 'capital city'." },
            { prompt: "The Walled City of Baku, the Palace of the Shirvanshahs, and the ______ Tower are UNESCO sites.", answer: "Maiden", highlights: ["Maiden Tower"], hint: "Look for the third UNESCO site mentioned." },
            { prompt: "Azerbaijan's cuisine is ______ and delicious.", answer: "diverse", highlights: ["cuisine is diverse and delicious"], hint: "Think of a word meaning 'varied' or 'many different kinds'." },
            { prompt: "Azerbaijan was part of the ______ Road trading route.", answer: "Silk", highlights: ["Silk Road trading"], hint: "A famous historical trading route." },
            { prompt: "Visitors can taste the ______ dishes in a peaceful atmosphere.", answer: "traditional", highlights: ["taste the traditional dishes"], hint: "Think of dishes that are part of a country's culture." },
            { prompt: "One can enjoy their visit thanks to the ______ Azerbaijani people.", answer: "welcoming", highlights: ["welcoming Azerbaijani people"], hint: "Think of a word describing friendly people." },
            { prompt: "Travel enthusiasts search for ______ and unusual destinations.", answer: "authentic", highlights: ["search for authentic and unusual destinations"], hint: "Think of a word meaning 'real' or 'genuine'." }
        ];
        
        const OPEN_QUESTIONS = [
            { prompt: "What is the geographical location of Azerbaijan?", model: "At the crossroads of Western Asia and Eastern Europe, between the Caucasus Mountains and the Caspian Sea", highlights: ["crossroads of Western Asia and Eastern Europe", "between the Caucasus Mountains and the Caspian Sea"], hint: "Look at the beginning of the second paragraph for the location description." },
            { prompt: "What natural wonders can be found in Azerbaijan?", model: "Mud volcanoes, hot springs, and the Yanar Daƒü (a natural burning fire)", highlights: ["mud volcanoes, hot springs, and the Yanar Daƒü"], hint: "Check the list of natural wonders in the second paragraph." },
            { prompt: "What UNESCO World Heritage Sites are mentioned in Baku?", model: "The Walled City of Baku, the Palace of the Shirvanshahs, and the Maiden Tower", highlights: ["Walled City of Baku", "Palace of the Shirvanshahs", "Maiden Tower"], hint: "Look for the complete list of UNESCO sites mentioned." },
            { prompt: "How is Azerbaijan's cuisine described in the passage?", model: "Diverse and delicious, reflecting its history as part of the Silk Road", highlights: ["cuisine is diverse and delicious", "part of the Silk Road trading"], hint: "Check the description of cuisine in the last paragraph." },
            { prompt: "What makes Azerbaijan a unique destination according to the passage?", model: "Its unique culture, rich history, and many unexplored locations", highlights: ["unique culture, rich history, and many unexplored locations"], hint: "Look at what makes the Turkic states worth visiting." },
            { prompt: "What can visitors experience in Baku?", model: "UNESCO World Heritage Sites, unique arts, cultural activities, and a modern business city life", highlights: ["UNESCO World Heritage Sites", "unique arts, cultural activities", "modern business city life"], hint: "Check all the experiences mentioned for Baku." },
            { prompt: "What is Yanar Daƒü?", model: "A natural burning fire on a hillside near the Caspian Sea", highlights: ["Yanar Daƒü, a natural burning fire on a hillside"], hint: "Look for the description of Yanar Daƒü in the second paragraph." },
            { prompt: "What historical significance does Azerbaijan have according to the passage?", model: "It was part of the Silk Road trading and cultural exchange crossroads", highlights: ["part of the Silk Road trading and cultural exchange crossroads"], hint: "Check the historical context in the last paragraph." },
            { prompt: "How can visitors enjoy their time in Azerbaijan even without speaking the language?", model: "Thanks to the welcoming Azerbaijani people", highlights: ["welcoming Azerbaijani people"], hint: "Look at the end of the last paragraph." },
            { prompt: "What kind of atmosphere can tourists enjoy in Azerbaijan?", model: "An atmosphere with historical wonders, architecture, and modern skyscrapers", highlights: ["atmosphere with historical wonders, architecture, and modern skyscrapers"], hint: "Check what tourists can enjoy in Baku." }
        ];
        
        // Application State
        let currentSlide = 0;
        let totalSlides = 3 + TF_QUESTIONS.length + MCQ_QUESTIONS.length + FILL_QUESTIONS.length + OPEN_QUESTIONS.length + 1;
        let speechSynthesis = window.speechSynthesis;
        let speechUtterance = null;
        let isReading = false;
        let isPaused = false;
        let currentQuestionText = "";
        let score = 0; // NEW: Score state

        // Vocabulary Game State
        let selectedEnglishCard = null;
        let matchedPairs = new Set();
        let turkishCardsMap = new Map();
        let usedVocabIndices = new Set();
        let currentVocabGameWords = [];
        
        // DOM Elements
        const readingDiv = document.getElementById('reading');
        const readingContentDiv = document.getElementById('readingContent');
        const qboxDiv = document.getElementById('qbox');
        const vocabGridDiv = document.getElementById('vocabGrid');
        const vocabGameContainerDiv = document.getElementById('vocabGameContainer');
        const completionDiv = document.getElementById('completion');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageIndicator = document.getElementById('pageIndicator');
        const readBtn = document.getElementById('readBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resumeBtn = document.getElementById('resumeBtn');
        const stopBtn = document.getElementById('stopBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const restartBtn = document.getElementById('restartBtn');
        const themeSelector = document.getElementById('themeSelector');
        const scoreDisplay = document.getElementById('score'); // NEW
        const finalScoreDisplay = document.getElementById('finalScore'); // NEW
        const progressBar = document.getElementById('progressBar'); // NEW
        
        // NEW: Sound Effects
        const correctSound = "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT";
        const wrongSound = "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT";
        const winSound = "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT";

        function playSound(soundData) {
            const audio = new Audio(soundData);
            audio.volume = 0.3;
            audio.play().catch(e => console.error("Audio play failed.", e));
        }
        
        // Theme Management
        const THEMES = {
            'dark-blue': 'theme-dark-blue',
            'light': 'theme-light',
            'nature': 'theme-nature',
            'tech': 'theme-tech'
        };

        function applyTheme(themeName) {
            document.body.className = THEMES[themeName] || '';
            localStorage.setItem('selectedTheme', themeName);
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('selectedTheme');
            if (savedTheme) {
                themeSelector.value = savedTheme;
                applyTheme(savedTheme);
            }
            themeSelector.addEventListener('change', (e) => {
                applyTheme(e.target.value);
            });
        }

        // NEW: Update Progress Bar
        function updateProgressBar() {
            const progress = (currentSlide / (totalSlides - 1)) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // Initialize the application
        function init() {
            showSlide(currentSlide);
            setupEventListeners();
            initTheme();
            setupFullscreenListener();
            updateProgressBar(); // Initial update
        }
        
        // Setup event listeners
        function setupEventListeners() {
            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                }
            });
            
            nextBtn.addEventListener('click', () => {
                if (currentSlide < totalSlides - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                }
            });
            
            readBtn.addEventListener('click', startReading);
            pauseBtn.addEventListener('click', pauseReading);
            resumeBtn.addEventListener('click', resumeReading);
            stopBtn.addEventListener('click', stopReading);
            fullscreenBtn.addEventListener('click', toggleFullscreen);
            restartBtn.addEventListener('click', () => {
                score = 0; // Reset score
                scoreDisplay.textContent = score;
                currentSlide = 0;
                showSlide(currentSlide);
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft' && currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                } else if (e.key === 'ArrowRight' && currentSlide < totalSlides - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                } else if (e.key === 'f' || e.key === 'F') {
                    toggleFullscreen();
                }
            });
        }

        // YENƒ∞: Tam ekran dinleyicisini kur
        function setupFullscreenListener() {
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);
        }

        // YENƒ∞: Tam ekran deƒüi≈üikliƒüini handle et
        function handleFullscreenChange() {
            if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
                document.body.classList.add('fullscreen-mode');
            } else {
                document.body.classList.remove('fullscreen-mode');
            }
        }
        
        // Show the current slide
        function showSlide(slideIndex) {
            readingDiv.style.display = 'none';
            qboxDiv.style.display = 'none';
            vocabGridDiv.style.display = 'none';
            vocabGameContainerDiv.style.display = 'none';
            completionDiv.style.display = 'none';
            
            stopReading();
            pageIndicator.textContent = `Page ${slideIndex + 1}`;
            updateProgressBar(); // Update progress on each slide change
            
            if (slideIndex === 0) {
                vocabGridDiv.style.display = 'grid';
                showVocabulary();
            } else if (slideIndex === 1) {
                vocabGameContainerDiv.style.display = 'flex';
                showVocabGame();
            } else if (slideIndex === 2) {
                readingDiv.style.display = 'block';
                qboxDiv.style.display = 'none';
                readingContentDiv.innerHTML = PASSAGE;
            } else if (slideIndex === totalSlides - 1) {
                completionDiv.style.display = 'flex';
                finalScoreDisplay.textContent = score; // Show final score
                launchConfetti(); // Launch confetti on completion
                playSound(winSound);
            } else {
                readingDiv.style.display = 'block';
                qboxDiv.style.display = 'block';
                readingContentDiv.innerHTML = PASSAGE;
                
                const questionIndex = slideIndex - 3;
                
                if (questionIndex < TF_QUESTIONS.length) {
                    showTFQuestion(TF_QUESTIONS[questionIndex]);
                } else if (questionIndex < TF_QUESTIONS.length + MCQ_QUESTIONS.length) {
                    const mcqIndex = questionIndex - TF_QUESTIONS.length;
                    showMCQQuestion(MCQ_QUESTIONS[mcqIndex]);
                } else if (questionIndex < TF_QUESTIONS.length + MCQ_QUESTIONS.length + FILL_QUESTIONS.length) {
                    const fillIndex = questionIndex - TF_QUESTIONS.length - MCQ_QUESTIONS.length;
                    showFillQuestion(FILL_QUESTIONS[fillIndex]);
                } else {
                    const openIndex = questionIndex - TF_QUESTIONS.length - MCQ_QUESTIONS.length - FILL_QUESTIONS.length;
                    showOpenQuestion(OPEN_QUESTIONS[openIndex]);
                }
            }
        }
        
        // Show vocabulary cards
        function showVocabulary() {
            vocabGridDiv.innerHTML = '';
            
            VOCAB_LIST.forEach(([english, turkish]) => {
                const card = document.createElement('div');
                card.className = 'vocab-card';
                card.textContent = english;
                
                card.addEventListener('click', function() {
                    if (!this.classList.contains('flipped')) {
                        this.classList.add('flipped');
                        this.textContent = turkish;
                    } else {
                        this.classList.remove('flipped');
                        this.textContent = english;
                    }
                });
                
                vocabGridDiv.appendChild(card);
            });
        }
        
        // Function to get random vocabulary words that haven't been used yet
        function getRandomVocabWords(count) {
            const availableIndices = [];
            
            for (let i = 0; i < VOCAB_LIST.length; i++) {
                if (!usedVocabIndices.has(i)) {
                    availableIndices.push(i);
                }
            }
            
            if (availableIndices.length === 0) {
                usedVocabIndices.clear();
                for (let i = 0; i < VOCAB_LIST.length; i++) {
                    availableIndices.push(i);
                }
            }
            
            const actualCount = Math.min(count, availableIndices.length);
            
            const selectedIndices = [];
            for (let i = 0; i < actualCount; i++) {
                const randomIndex = Math.floor(Math.random() * availableIndices.length);
                const selectedIndex = availableIndices[randomIndex];
                selectedIndices.push(selectedIndex);
                usedVocabIndices.add(selectedIndex);
                availableIndices.splice(randomIndex, 1);
            }
            
            return selectedIndices.map(index => VOCAB_LIST[index]);
        }
        
        // Show Vocabulary Game
        function showVocabGame() {
            selectedEnglishCard = null;
            matchedPairs.clear();
            turkishCardsMap.clear();
            
            currentVocabGameWords = getRandomVocabWords(10);
            
            vocabGameContainerDiv.innerHTML = "";

            const englishColumn = document.createElement('div');
            englishColumn.className = 'vocab-game-column';
            const turkishColumn = document.createElement('div');
            turkishColumn.className = 'vocab-game-column';

            currentVocabGameWords.forEach((pair, index) => {
                const card = document.createElement('div');
                card.className = 'vocab-game-card';
                card.textContent = pair[0];
                card.dataset.index = index;
                card.dataset.type = 'english';
                card.addEventListener('click', handleCardClick);
                englishColumn.appendChild(card);
            });

            const shuffledTurkish = currentVocabGameWords.map((pair, index) => ({ word: pair[1], originalIndex: index }))
                .sort(() => Math.random() - 0.5);

            shuffledTurkish.forEach(item => {
                const card = document.createElement('div');
                card.className = 'vocab-game-card';
                card.textContent = item.word;
                card.dataset.index = item.originalIndex;
                card.dataset.type = 'turkish';
                card.addEventListener('click', handleCardClick);
                turkishCardsMap.set(card, item.originalIndex);
                turkishColumn.appendChild(card);
            });

            vocabGameContainerDiv.appendChild(englishColumn);
            vocabGameContainerDiv.appendChild(turkishColumn);
        }

        // Handle card clicks in the vocabulary game
        function handleCardClick(event) {
            const card = event.target;
            const type = card.dataset.type;
            const index = parseInt(card.dataset.index);

            if (matchedPairs.has(index)) {
                return;
            }

            if (type === 'english') {
                if (selectedEnglishCard) {
                    selectedEnglishCard.classList.remove('selected');
                }
                card.classList.add('selected');
                selectedEnglishCard = card;
            } else if (type === 'turkish') {
                if (!selectedEnglishCard) {
                    return;
                }
                
                const englishIndex = parseInt(selectedEnglishCard.dataset.index);

                if (englishIndex === index) {
                    // Correct match
                    card.classList.add('matched');
                    selectedEnglishCard.classList.add('matched');
                    matchedPairs.add(index);
                    
                    // NEW: Add score and play sound
                    score += 10;
                    scoreDisplay.textContent = score;
                    playSound(correctSound);
                    
                    selectedEnglishCard.classList.remove('selected');
                    selectedEnglishCard = null;

                    if (matchedPairs.size === currentVocabGameWords.length) {
                        setTimeout(() => {
                            vocabGameContainerDiv.innerHTML = `
                                <div class="game-message">üéâ Congratulations! You've matched all the words!</div>
                                <div class="game-controls">
                                    <button id="playAgainBtn">üîÑ Play Again</button>
                                </div>
                            `;
                            playSound(winSound);
                            
                            document.getElementById('playAgainBtn').addEventListener('click', () => {
                                showVocabGame();
                            });
                        }, 500);
                    }
                } else {
                    // Incorrect match
                    card.classList.add('incorrect');
                    selectedEnglishCard.classList.add('incorrect');
                    playSound(wrongSound); // NEW: Play wrong sound
                    
                    setTimeout(() => {
                        card.classList.remove('incorrect');
                        selectedEnglishCard.classList.remove('incorrect');
                        selectedEnglishCard.classList.remove('selected');
                        selectedEnglishCard = null;
                    }, 800);
                }
            }
        }
        
        // Show True/False question
        function showTFQuestion(question) {
            currentQuestionText = question.prompt;
            
            qboxDiv.innerHTML = `
                <div class="question">${question.prompt}</div>
                <div class="options">
                    <div class="option" data-value="True">True</div>
                    <div class="option" data-value="False">False</div>
                </div>
                <div class="button-group">
                    <button id="showAnswerBtn">üí° Show Answer</button>
                    <button id="showHintBtn">üí¨ Hint</button>
                </div>
                <div class="answer" id="answerDiv"></div>
                <div class="hint" id="hintDiv"></div>
            `;
            
            const showAnswerBtn = document.getElementById('showAnswerBtn');
            const showHintBtn = document.getElementById('showHintBtn');
            const answerDiv = document.getElementById('answerDiv');
            const hintDiv = document.getElementById('hintDiv');
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                option.addEventListener('click', function() {
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            showAnswerBtn.addEventListener('click', () => {
                answerDiv.textContent = `Answer: ${question.answer}`;
                answerDiv.style.display = 'block';
                highlightText(question.highlights);
                playSound(correctSound); // NEW
            });
            
            showHintBtn.addEventListener('click', () => {
                hintDiv.textContent = `üí° Hint: ${question.hint}`;
                hintDiv.style.display = 'block';
            });
        }
        
        // Show Multiple Choice question
        function showMCQQuestion(question) {
            currentQuestionText = question.prompt;
            
            let optionsHTML = '';
            question.options.forEach((option, index) => {
                optionsHTML += `<div class="option" data-value="${index}">${option}</div>`;
            });
            
            qboxDiv.innerHTML = `
                <div class="question">${question.prompt}</div>
                <div class="options">${optionsHTML}</div>
                <div class="button-group">
                    <button id="showAnswerBtn">üí° Show Answer</button>
                    <button id="showHintBtn">üí¨ Hint</button>
                </div>
                <div class="answer" id="answerDiv"></div>
                <div class="hint" id="hintDiv"></div>
            `;
            
            const showAnswerBtn = document.getElementById('showAnswerBtn');
            const showHintBtn = document.getElementById('showHintBtn');
            const answerDiv = document.getElementById('answerDiv');
            const hintDiv = document.getElementById('hintDiv');
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                option.addEventListener('click', function() {
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            showAnswerBtn.addEventListener('click', () => {
                answerDiv.textContent = `Answer: ${question.options[question.answer]}`;
                answerDiv.style.display = 'block';
                highlightText(question.highlights);
                playSound(correctSound); // NEW
            });
            
            showHintBtn.addEventListener('click', () => {
                hintDiv.textContent = `üí° Hint: ${question.hint}`;
                hintDiv.style.display = 'block';
            });
        }
        
        // Show Fill-in question
        function showFillQuestion(question) {
            currentQuestionText = question.prompt;
            
            qboxDiv.innerHTML = `
                <div class="question">${question.prompt}</div>
                <input type="text" id="fillAnswer" placeholder="Type your answer here">
                <div class="button-group">
                    <button id="showAnswerBtn">üí° Show Answer</button>
                    <button id="showHintBtn">üí¨ Hint</button>
                </div>
                <div class="answer" id="answerDiv"></div>
                <div class="hint" id="hintDiv"></div>
            `;
            
            const showAnswerBtn = document.getElementById('showAnswerBtn');
            const showHintBtn = document.getElementById('showHintBtn');
            const answerDiv = document.getElementById('answerDiv');
            const hintDiv = document.getElementById('hintDiv');
            
            showAnswerBtn.addEventListener('click', () => {
                answerDiv.textContent = `Answer: ${question.answer}`;
                answerDiv.style.display = 'block';
                highlightText(question.highlights);
                playSound(correctSound); // NEW
            });
            
            showHintBtn.addEventListener('click', () => {
                hintDiv.textContent = `üí° Hint: ${question.hint}`;
                hintDiv.style.display = 'block';
            });
        }
        
        // Show Open-ended question
        function showOpenQuestion(question) {
            currentQuestionText = question.prompt;
            
            qboxDiv.innerHTML = `
                <div class="question">${question.prompt}</div>
                <textarea id="openAnswer" placeholder="Type your answer here" rows="4"></textarea>
                <div class="button-group">
                    <button id="showAnswerBtn">üí° Show Model Answer</button>
                    <button id="showHintBtn">üí¨ Hint</button>
                </div>
                <div class="answer" id="answerDiv"></div>
                <div class="hint" id="hintDiv"></div>
            `;
            
            const showAnswerBtn = document.getElementById('showAnswerBtn');
            const showHintBtn = document.getElementById('showHintBtn');
            const answerDiv = document.getElementById('answerDiv');
            const hintDiv = document.getElementById('hintDiv');
            
            showAnswerBtn.addEventListener('click', () => {
                answerDiv.textContent = `Model Answer: ${question.model}`;
                answerDiv.style.display = 'block';
                highlightText(question.highlights);
                playSound(correctSound); // NEW
            });
            
            showHintBtn.addEventListener('click', () => {
                hintDiv.textContent = `üí° Hint: ${question.hint}`;
                hintDiv.style.display = 'block';
            });
        }
        
        // Highlight text in the reading passage
        function highlightText(highlights) {
            let highlightedText = PASSAGE;
            
            highlights.forEach(phrase => {
                const escapedPhrase = phrase.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp(`(${escapedPhrase})`, 'gi');
                highlightedText = highlightedText.replace(regex, '<span class="highlight">$1</span>');
            });
            
            readingContentDiv.innerHTML = highlightedText;
        }
        
        // Text-to-speech functions
        function startReading() {
            if (isReading && !isPaused) return;
            
            if (isPaused) {
                resumeReading();
                return;
            }
            
            let textToRead = "";
            
            if (currentSlide >= 3 && currentSlide < totalSlides - 1) {
                textToRead = currentQuestionText;
            } else {
                textToRead = readingContentDiv.innerText;
            }
            
            speechUtterance = new SpeechSynthesisUtterance(textToRead);
            speechUtterance.lang = 'en-US';
            speechUtterance.rate = 0.9;
            
            speechUtterance.onend = () => {
                stopReading();
            };
            
            speechSynthesis.speak(speechUtterance);
            isReading = true;
            isPaused = false;
            
            readBtn.style.display = 'none';
            pauseBtn.style.display = 'inline-block';
            stopBtn.style.display = 'inline-block';
        }
        
        function pauseReading() {
            if (!isReading || isPaused) return;
            speechSynthesis.pause();
            isPaused = true;
            pauseBtn.style.display = 'none';
            resumeBtn.style.display = 'inline-block';
        }
        
        function resumeReading() {
            if (!isReading || !isPaused) return;
            speechSynthesis.resume();
            isPaused = false;
            resumeBtn.style.display = 'none';
            pauseBtn.style.display = 'inline-block';
        }
        
        function stopReading() {
            if (!isReading) return;
            speechSynthesis.cancel();
            isReading = false;
            isPaused = false;
            readBtn.style.display = 'inline-block';
            pauseBtn.style.display = 'none';
            resumeBtn.style.display = 'none';
            stopBtn.style.display = 'none';
        }
        
        // Toggle fullscreen
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // NEW: Confetti function
        function launchConfetti() {
            const colors = ['#e94560', '#f39c12', '#2ecc71', '#3498db', '#9b59b6'];
            const confettiCount = 100;

            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);

                    setTimeout(() => {
                        confetti.remove();
                    }, 4000);
                }, i * 30);
            }
        }
        
        // Initialize the application when the DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>