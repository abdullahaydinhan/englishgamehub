<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Game Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; padding-top: 70px; }
        
        /* NAVBAR */
        .navbar { box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 10px 0; z-index: 1030; }
        .navbar-brand { font-weight: 800; font-size: 1.5rem; letter-spacing: -0.5px; }
        .nav-link { font-weight: 600; margin: 0 5px; cursor: pointer; }
        .nav-link.active { color: #0d6efd !important; }

        /* --- GELÄ°ÅžMÄ°Åž SOL YAN MENÃœ --- */
        .left-sidebar {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1050;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .grade-menu-item {
            position: relative;
            background-color: #343a40;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 0 15px 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.2);
            font-weight: bold;
            z-index: 1051;
        }

        .grade-menu-item:hover { background-color: #0d6efd; width: 70px; }

        /* MEGA MENU (SUBMENU) */
        .grade-submenu {
            display: none;
            position: absolute;
            left: 70px; /* Butonun saÄŸÄ±nda */
            top: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 5px 5px 30px rgba(0,0,0,0.25);
            width: 500px; /* GeniÅŸ Mega MenÃ¼ */
            height: 320px; /* Sabit YÃ¼kseklik */
            border: 1px solid #eee;
            z-index: 1060;
            overflow: hidden;
            display: none; /* VarsayÄ±lan gizli */
        }

        /* Flex YapÄ±: Sol Linkler - SaÄŸ Ã–nizleme */
        .submenu-layout {
            display: flex;
            height: 100%;
        }

        .submenu-links {
            width: 40%;
            background-color: #f8f9fa;
            padding: 15px;
            border-right: 1px solid #eee;
            display: flex;
            flex-direction: column;
            gap: 5px;
            overflow-y: auto;
        }

        .submenu-preview {
            width: 60%;
            padding: 15px;
            background-color: white;
            overflow-y: auto;
        }

        /* MenÃ¼ Linkleri */
        .submenu-link {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            color: #555;
            text-decoration: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: 0.2s;
        }
        .submenu-link:hover { background-color: #e9ecef; color: #0d6efd; transform: translateX(5px); }
        .submenu-link i { width: 25px; }

        /* Hover Tetikleyici */
        .grade-menu-item:hover .grade-submenu { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        /* Ã–nizleme KartlarÄ± (Mini) */
        .preview-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            transition: 0.2s;
            cursor: pointer;
        }
        .preview-item:hover { background-color: #f0f7ff; }
        .preview-item:last-child { border-bottom: none; }
        .preview-icon {
            width: 35px; height: 35px;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 0.9rem;
        }
        .preview-text h6 { margin: 0; font-size: 0.85rem; font-weight: 700; color: #333; }
        .preview-text small { font-size: 0.7rem; color: #888; }

        /* RESPONSIVE (MOBÄ°L AYARLARI) */
        @media (max-width: 768px) {
            .left-sidebar { gap: 8px; }
            .grade-menu-item { width: 40px; height: 40px; font-size: 0.8rem; border-radius: 0 10px 10px 0; }
            .grade-menu-item:hover { width: 50px; }
            /* Mobilde Mega MenÃ¼yÃ¼ Kapat (Ã‡ok yer kaplar) - TÄ±klayÄ±nca ana sayfaya gitsin */
            .grade-menu-item:hover .grade-submenu { display: none !important; } 
            .grade-circle { width: 25px; height: 25px; font-size: 0.9rem; }
        }

        /* SÄ±nÄ±f Ä°konu */
        .grade-circle {
            width: 35px; height: 35px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.1rem;
        }

        /* DÄ°ÄžER STÄ°LLER */
        .grade-badge { position: absolute; top: 10px; right: 10px; padding: 5px 12px; border-radius: 8px; color: white; font-weight: 700; font-size: 0.75rem; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 2; }
        .badge-9 { background: linear-gradient(45deg, #00c6ff, #0072ff); }
        .badge-10 { background: linear-gradient(45deg, #11998e, #38ef7d); }
        .badge-11 { background: linear-gradient(45deg, #fce38a, #f38181); color: #333 !important; }
        .badge-12 { background: linear-gradient(45deg, #ff416c, #ff4b2b); }

        .game-card { border: none; border-radius: 16px; transition: all 0.3s ease; background: white; height: 100%; border: 1px solid #eee; cursor: pointer; }
        .game-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: #0d6efd; }
        .icon-box { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 1rem; color: white; }
        
        .icon-Games { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: #d63384; }
        .icon-Interactive_Activities { background-color: #0d6efd; }
        .icon-Videos { background-color: #dc3545; }
        .icon-Vocabulary { background-color: #198754; }
        .icon-Grammar { background-color: #fd7e14; }
        .icon-Slides { background-color: #6f42c1; }
        .icon-Documents { background-color: #0dcaf0; }
        
        .view-section { display: none; animation: fadeIn 0.5s ease; }
        .view-section.active-view { display: block; }
        .hero-section { background: linear-gradient(120deg, #2980b9, #8e44ad); color: white; padding: 60px 0; border-radius: 0 0 50px 50px; margin-bottom: 40px; }
        
        .nav-pills .nav-link { border-radius: 50px; padding: 10px 30px; margin: 0 5px; background: white; border: 2px solid #e9ecef; color: #6c757d; font-weight: 700; transition: all 0.3s; }
        .nav-pills .nav-link.active { background-color: #0d6efd !important; border-color: #0d6efd !important; color: #ffffff !important; transform: scale(1.05); box-shadow: 0 4px 15px rgba(13,110,253,0.3); }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand text-primary" href="#" onclick="switchView('home')"><i class="fa-solid fa-graduation-cap"></i> EGH</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a class="nav-link active" id="nav-home" onclick="switchView('home')">Home</a></li>
                <li class="nav-item"><a class="nav-link" id="nav-Games" onclick="switchView('Games')">Games</a></li>
                <li class="nav-item"><a class="nav-link" id="nav-Interactive_Activities" onclick="switchView('Interactive_Activities')">Activities</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Study Materials</a>
                    <ul class="dropdown-menu border-0 shadow">
                        <li><a class="dropdown-item" onclick="switchView('Vocabulary')"><i class="fa-solid fa-book-open text-success me-2"></i> Vocabulary</a></li>
                        <li><a class="dropdown-item" onclick="switchView('Grammar')"><i class="fa-solid fa-pen-nib text-warning me-2"></i> Grammar</a></li>
                        <li><a class="dropdown-item" onclick="switchView('Videos')"><i class="fa-solid fa-youtube text-danger me-2"></i> Videos</a></li>
                        <li><a class="dropdown-item" onclick="switchView('Slides')"><i class="fa-solid fa-person-chalkboard text-primary me-2"></i> Slides</a></li>
                        <li><a class="dropdown-item" onclick="switchView('Documents')"><i class="fa-solid fa-file-pdf text-info me-2"></i> Documents</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a class="nav-link" id="nav-about" onclick="switchView('about')">About</a></li>
                <li class="nav-item ms-2"><button class="btn btn-primary rounded-pill px-4 fw-bold btn-sm shadow-sm" data-bs-toggle="modal" data-bs-target="#contactModal">Contact</button></li>
            </ul>
        </div>
    </div>
</nav>

<div class="left-sidebar">
    <script>
        const grades = ['9TH_GRADE', '10TH_GRADE', '11TH_GRADE', '12TH_GRADE'];
        const gradeNums = {'9TH_GRADE':9, '10TH_GRADE':10, '11TH_GRADE':11, '12TH_GRADE':12};
        
        grades.forEach(g => {
            const num = gradeNums[g];
            document.write(`
            <div class="grade-menu-item" onclick="quickNav('${g}', 'Games')"> <div class="grade-circle">${num}</div>
                
                <div class="grade-submenu">
                    <div class="submenu-layout">
                        <div class="submenu-links">
                            <div class="text-muted small mb-2 border-bottom pb-1 fw-bold">Categories</div>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Games')" onclick="quickNav('${g}', 'Games')"><i class="fa-solid fa-gamepad text-danger"></i> Games</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Interactive_Activities')" onclick="quickNav('${g}', 'Interactive_Activities')"><i class="fa-solid fa-laptop-code text-primary"></i> Activities</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Vocabulary')" onclick="quickNav('${g}', 'Vocabulary')"><i class="fa-solid fa-book-open text-success"></i> Vocabulary</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Grammar')" onclick="quickNav('${g}', 'Grammar')"><i class="fa-solid fa-pen-nib text-warning"></i> Grammar</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Videos')" onclick="quickNav('${g}', 'Videos')"><i class="fa-solid fa-youtube text-danger"></i> Videos</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Slides')" onclick="quickNav('${g}', 'Slides')"><i class="fa-solid fa-person-chalkboard text-primary"></i> Slides</a>
                            <a href="#" class="submenu-link" onmouseover="showPreview('${g}', 'Documents')" onclick="quickNav('${g}', 'Documents')"><i class="fa-solid fa-file-pdf text-info"></i> Documents</a>
                        </div>
                        <div class="submenu-preview" id="preview-${g}">
                            <div class="text-center text-muted mt-5"><small>Hover over a category<br>to see latest items.</small></div>
                        </div>
                    </div>
                </div>
            </div>
            `);
        });
    </script>
</div>

<div id="view-home" class="view-section active-view">
    <div class="hero-section text-center">
        <div class="container">
            <h1 class="display-3 fw-bold mb-3">English Game Hub</h1>
            <p class="lead mb-4 opacity-75">Interactive Games, Quizzes, and Activities.</p>
            <div class="d-flex justify-content-center gap-3">
                <button onclick="switchView('Games')" class="btn btn-light btn-lg rounded-pill fw-bold text-primary px-5 shadow">Play Games</button>
                <button onclick="switchView('Interactive_Activities')" class="btn btn-outline-light btn-lg rounded-pill fw-bold px-5 border-2">Activities</button>
            </div>
        </div>
    </div>
    <div class="container py-4">
        <div class="d-flex align-items-center mb-4">
            <h3 class="fw-bold m-0"><i class="fa-solid fa-rocket text-primary me-2"></i> New Arrivals</h3>
            <span class="badge bg-danger ms-3">Fresh Content</span>
        </div>
        <div id="home-showcase" class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
            <div class="text-center w-100 py-5"><div class="spinner-border text-primary"></div></div>
        </div>
    </div>
</div>

<div id="view-about" class="view-section container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <div class="bg-white p-5 rounded-4 shadow-sm">
                <img src="https://cdn-icons-png.flaticon.com/512/3429/3429149.png" alt="Teacher" width="100" class="mb-3">
                <h2 class="fw-bold mb-4">About the Platform</h2>
                <p class="text-muted fs-5">Welcome to the <strong>English Game Hub!</strong><br><br>I am an English Teacher dedicated to making language learning accessible and enjoyable.</p>
                <div class="mt-4 p-3 bg-light rounded-3 d-inline-block"><h5 class="fw-bold text-primary m-0">Have fun and keep learning! ðŸš€</h5></div>
            </div>
        </div>
    </div>
</div>

<div id="view-content" class="view-section container mt-4">
    <div class="text-center mb-5"><h2 id="page-title" class="fw-bold display-6">Library</h2><p id="page-subtitle" class="text-muted">Select your grade to see the materials.</p></div>
    <ul class="nav nav-pills justify-content-center mb-5" id="gradeTabs">
        <li class="nav-item"><button class="nav-link active" id="btn-9TH_GRADE" onclick="changeGrade('9TH_GRADE', this)">9. SÄ±nÄ±f</button></li>
        <li class="nav-item"><button class="nav-link" id="btn-10TH_GRADE" onclick="changeGrade('10TH_GRADE', this)">10. SÄ±nÄ±f</button></li>
        <li class="nav-item"><button class="nav-link" id="btn-11TH_GRADE" onclick="changeGrade('11TH_GRADE', this)">11. SÄ±nÄ±f</button></li>
        <li class="nav-item"><button class="nav-link" id="btn-12TH_GRADE" onclick="changeGrade('12TH_GRADE', this)">12. SÄ±nÄ±f</button></li>
    </ul>
    <div id="content-display"></div>
</div>

<footer class="text-center py-4 mt-5 border-top bg-white"><small class="text-muted">&copy; 2025 English Game Hub - Designed for Students</small></footer>

<div class="modal fade" id="contactModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow"><div class="modal-header bg-primary text-white"><h5 class="modal-title"><i class="fa-solid fa-envelope"></i> Contact Teacher</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body p-4 text-center"><i class="fa-solid fa-paper-plane fa-3x text-primary mb-3"></i><p class="fs-5">Hello! Do you have any questions?</p><p class="text-muted">Feel free to send me an email.</p><div class="alert alert-light border mt-3"><strong><i class="fa-solid fa-at"></i> Email:</strong><br><a href="mailto:abdullahaydÄ±nhan@gmail.com" class="text-decoration-none fw-bold text-break">abdullahaydÄ±nhan@gmail.com</a></div></div><div class="modal-footer border-0 justify-content-center pb-4"><button type="button" class="btn btn-secondary px-4 rounded-pill" data-bs-dismiss="modal">Close</button></div></div></div></div>

<script>
    let allData = [];
    let currentMode = 'home'; 
    let currentGrade = '9TH_GRADE';
    
    const CONFIG = {
        'Games': { title: 'ðŸŽ® Interactive Games', subtitle: 'Play and learn with our game collection.', icon: 'fa-gamepad' },
        'Interactive_Activities': { title: 'ðŸ§© Interactive Activities', subtitle: 'Digital exercises and quizzes.', icon: 'fa-laptop-code' },
        'Videos': { title: 'ðŸŽ¬ Educational Videos', subtitle: 'Watch and learn.', icon: 'fa-youtube' },
        'Vocabulary': { title: 'ðŸ“– Vocabulary & Resources', subtitle: 'PDFs, Word documents, and Study Lists.', icon: 'fa-book-open' },
        'Grammar': { title: 'âœï¸ Grammar Exercises', subtitle: 'Master the rules of English.', icon: 'fa-pen-nib' },
        'Slides': { title: 'ðŸ“Š Presentations', subtitle: 'Lesson slides and summaries.', icon: 'fa-person-chalkboard' },
        'Documents': { title: 'ðŸ“„ Documents', subtitle: 'Worksheets and PDFs.', icon: 'fa-file-pdf' }
    };

    fetch('games_data.json').then(r => r.json()).then(d => { 
        allData = d.reverse(); 
        renderHomeLatest(); 
    }).catch(e => console.error(e));

    // --- MEGA MENU Ã–NÄ°ZLEME FONKSÄ°YONU ---
    function showPreview(grade, source) {
        const previewContainer = document.getElementById(`preview-${grade}`);
        // O sÄ±nÄ±f ve o kaynaktaki iÃ§erikleri bul
        const items = allData.filter(i => i.grade === grade && i.source === source && i.isVisible !== false).slice(0, 5); // En son 5 tane
        
        if (items.length === 0) {
            previewContainer.innerHTML = `<div class="text-center text-muted mt-4"><small>No items found in<br><b>${source}</b></small></div>`;
            return;
        }

        let html = `<div class="text-muted small mb-2 border-bottom pb-1">Latest in ${source}</div>`;
        items.forEach(item => {
            let iconClass = CONFIG[item.source] ? CONFIG[item.source].icon : 'fa-file';
            if(item.source === 'Vocabulary') iconClass = getFileIcon(item.name);
            const cleanName = item.title || item.name.replace(/\.(html|pdf|docx|xlsx)$/i, '').replace(/_/g, ' ');

            html += `
            <div class="preview-item" onclick="window.open('${item.path}', '_blank')">
                <div class="preview-icon icon-${item.source}"><i class="fa-solid ${iconClass}"></i></div>
                <div class="preview-text">
                    <h6 class="text-truncate" style="max-width: 180px;">${cleanName}</h6>
                    <small>${item.description ? item.description.substring(0,30)+'...' : 'Click to view'}</small>
                </div>
            </div>`;
        });
        previewContainer.innerHTML = html;
    }

    function quickNav(grade, mode) {
        switchView(mode);
        currentGrade = grade;
        document.querySelectorAll('#gradeTabs .nav-link').forEach(b => b.classList.remove('active'));
        if(document.getElementById('btn-' + grade)) {
            document.getElementById('btn-' + grade).classList.add('active');
        }
        renderContent();
        window.scrollTo(0,0);
    }

    function switchView(viewName) {
        document.querySelectorAll('.navbar .nav-link').forEach(el => el.classList.remove('active'));
        if(document.getElementById('nav-' + viewName)) document.getElementById('nav-' + viewName).classList.add('active');
        
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));

        if (viewName === 'home') document.getElementById('view-home').classList.add('active-view');
        else if (viewName === 'about') document.getElementById('view-about').classList.add('active-view');
        else {
            document.getElementById('view-content').classList.add('active-view');
            currentMode = viewName; 
            const conf = CONFIG[viewName] || { title: viewName, subtitle: 'Resource Library' };
            document.getElementById('page-title').innerHTML = conf.title;
            document.getElementById('page-subtitle').innerHTML = conf.subtitle;
            renderContent();
        }
        const navBar = document.getElementById('navbarNav');
        if (navBar.classList.contains('show')) new bootstrap.Collapse(navBar).hide();
        window.scrollTo(0,0);
    }

    function changeGrade(grade, btn) {
        currentGrade = grade;
        document.querySelectorAll('#gradeTabs .nav-link').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderContent();
    }

    function renderHomeLatest() {
        const container = document.getElementById('home-showcase');
        const allGames = allData.filter(i => i.source === 'Games');
        const allOthers = allData.filter(i => i.source !== 'Games');
        let showcaseItems = [];
        
        showcaseItems.push(...allGames.slice(0, 4));
        let needed = 10 - showcaseItems.length;
        if(needed > 0) showcaseItems.push(...allOthers.slice(0, needed));
        if(showcaseItems.length < 10) {
             let remainingGames = allGames.slice(4);
             let moreNeeded = 10 - showcaseItems.length;
             showcaseItems.push(...remainingGames.slice(0, moreNeeded));
        }

        let html = "";
        showcaseItems.forEach(item => { html += createCardHTML(item); });
        container.innerHTML = html;
    }

    function getFileIcon(filename) {
        if(filename.endsWith('.pdf')) return 'fa-file-pdf';
        if(filename.endsWith('.docx') || filename.endsWith('.doc')) return 'fa-file-word';
        if(filename.endsWith('.xlsx') || filename.endsWith('.xls')) return 'fa-file-excel';
        if(filename.endsWith('.html')) return 'fa-globe';
        return 'fa-file';
    }

    function createCardHTML(item) {
        const displayTitle = item.title || item.name.replace(/\.(html|pdf|docx|xlsx)$/i, '').replace(/_/g, ' ');
        const badge = item.unit ? `<span class="badge bg-light text-primary border mb-2">${item.unit}</span>` : '';
        
        const gradeNum = item.grade.replace('TH_GRADE', ''); 
        const gradeBadgeClass = `badge-${gradeNum}`;
        const gradeLabel = `<span class="grade-badge ${gradeBadgeClass}">${gradeNum}TH</span>`;
        
        let iconClass = 'fa-gamepad'; 
        let bgClass = 'icon-Games';
        if (CONFIG[item.source]) {
            iconClass = CONFIG[item.source].icon;
            bgClass = 'icon-' + item.source;
        }
        if (item.source === 'Vocabulary') iconClass = getFileIcon(item.name);

        return `
            <div class="col">
                <a href="${item.path}" class="text-decoration-none text-dark" target="_blank">
                    <div class="game-card h-100 position-relative">
                        ${gradeLabel}
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between">
                                <div class="icon-box ${bgClass}"><i class="fa-solid ${iconClass}"></i></div>
                            </div>
                            ${badge}
                            <h5 class="fw-bold mb-2 text-truncate">${displayTitle}</h5>
                            <p class="text-muted small mb-0 text-truncate">${item.description || 'Click to view.'}</p>
                        </div>
                    </div>
                </a>
            </div>`;
    }

    function renderContent() {
        const container = document.getElementById('content-display');
        const items = allData.filter(item => item.grade === currentGrade && item.source === currentMode && item.isVisible !== false);

        if (items.length === 0) {
            container.innerHTML = `<div class="text-center py-5 bg-white rounded-4 shadow-sm border border-light"><i class="fa-solid fa-folder-open fa-3x text-muted mb-3 opacity-25"></i><h5 class="text-muted fw-bold">No content available yet.</h5></div>`;
            return;
        }

        let html = `<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">`;
        items.forEach(item => { html += createCardHTML(item); });
        html += `</div>`;
        container.innerHTML = html;
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
